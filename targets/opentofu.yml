name: opentofu
kind: target
sections:
  OpenTofu:
    - Use modules with clear input/output contracts.
    - Keep state remote and encrypted; avoid local state for shared environments.
    - Prefer plan/apply separation in CI.
    - Infra repos may implement non-applicable Makefile targets as no-ops.
  Analysis:
    - text: "Static analysis: tflint."
      when:
        profiles: [strict, moderate]
    - text: "Static analysis: tflint."
      when:
        profiles: [permissive]
        packs: [analysis]
    - text: "Security scanning: tfsec."
      when:
        profiles: [strict, moderate]
    - text: "Security scanning: tfsec."
      when:
        profiles: [permissive]
        packs: [security]
  Testing:
    - "Unit testing: tofu test."
    - "Coverage targets are often N/A for OpenTofu; call out limitations and request an explicit exception."
