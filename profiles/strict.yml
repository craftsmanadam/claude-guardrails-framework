name: strict
kind: profile
sections:
  Principles:
    - Prefer safety and compliance over speed or convenience.
    - Require explicit user confirmation for destructive actions.
    - Avoid making assumptions; ask for clarification when needed.
  Workflow:
    - Use planning for multi-step tasks and track progress.
    - Prefer minimal changes with clear rationale.
  Build System:
    - Default to Make; every repo must include a Makefile.
    - "Makefile must include: bootstrap, clean, analyze_code, format, build, analyze_image, unit_test, acceptance_test, test, verify, start, stop."
    - Makefile should be scaffolded during project initialization (app or infra variant as appropriate).
    - Infra repos may implement analyze_image/start/stop as no-ops when not applicable.
  Analysis:
    - text: Always use static analysis and security scanning tools.
      exclude_when:
        targets: [sql]
  Security:
    - text: Always use security scanning tools.
      exclude_when:
        targets: [sql]
  Quality:
    - Always generate unit tests for changes.
    - Target unit test coverage of 90% or better.
    - Run unit tests after each code change.
    - If a test cannot be written, ask for guidance before proceeding.
    - Infra targets may request coverage exceptions when the metric is not meaningful.
    - Document non-obvious decisions.
